---
lang: zh-CN
title: 數據管理
description: mysql
---

## 外鍵

下面是物理外鍵：

```sql
-- 定義外鍵 key
-- 外鍵類似於約束，執行引用其它表的數據，references 引用
key `FK_gradeid` (`gradeid`),
constraint `FK_gradeid` foreign key (`gradeid`) references `gradeid` (`gradeid`)
-- 1.外鍵不能是主鍵
-- 2.兩個字段數據類型和約束必須相同

-- 或者

alter table `表名`
add constraint `FK_gradeid` foreign key (`gradeid`) references `grade` (`gradeid`)

-- alter table 表 add constraint [約束名] foreign key (作為外鍵的列) references 那個表（那個字段）
```

刪除外鍵的時候，必須先刪除字表，再刪除父表

#### 不得使用外鍵於級聯

## DML 語言

### 插入

> insert

```sql
-- insert into 表名 (`字段名`,`字段名2`) values （`值1`,`值2`）
-- insert into 表名 (`字段名`) values （`值1`),(`值2`）; 一個字段多個值
insert into `student` (`name`) values ('陳柒')
```

注意：字段和值得位置是一一對應的

### 修改

> update

```sql
-- 語法：update 表名 set column_name = value where [條件]
update `student` set `name`='陳柒' where id = 1;

-- 修改多個屬性
update `student` set `name`='陳柒',`age`='22',`email`='3062995371@qq.com' where id = 1;
```

語法：`update 表名 set column_name = value,[column_name = value,......] where [條件]`

注意：

1. 不寫條件會影響整張表
2. `column_name`是數據庫的列，盡量帶上英文冒號``
3. `value`是一個具體的值，也可以是一個變量

重點在于`where`條件，其作用于每條數據，計算結果必須是`Boolean`值：

|       操作符       |              含義              | 例子 |
| :----------------: | :----------------------------: | :--: |
|        `=`         |              等於              |      |
|     `<>`或`!=`     |             不等於             |      |
|        `>`         |              大於              |      |
|        `<`         |              小於              |      |
| `between...and...` |    指定範圍之內，如:`[2,5]`    |      |
|       `and`        | 和，類似於&&，左右必須同時滿足 |      |
|        `or`        |      或，左右滿足一項即可      |      |

### 刪除

> delete

```sql
--刪除指定數據
delete from `student` where id = 1;


-- 清空表
truncate `student`;
delete from `studeng`;
```

清空表的區別：

1. `delete`:

   - 不會影響自增

2. `truncate`:
   - 自增會歸零

## DQL 查詢數據

### 查詢

> 指定字段查詢

```sql
-- 查詢所有學生
select * form student

--查詢指定字段
select `student_no`,`studeng_name` from student;

--查詢指定字段添加別名（給字段起別名，表也可以）
select `student_no` as 學號,`studeng_name` as 姓名 from student;

-- 函數:Concat(a,b)，拼接字符串
select concat('姓名：',student_name) as 名字 from studeng;

```

### 去重

> distinct

```SQL
-- 剔除重複數據，重複只顯示一條，查詢result中student_no，並去重
select distinct `student_no` from result;

select 100*3-1; --運算表達式
select version(); --查看mysql版本
select @@auto_increment_increment;--查看自增步長
```

數據庫中的`select`表達式：文本值，列，null，函數，計算表達式，系統變量

### where 條件字句

作用：就是檢索數據中`符合條件`的值

> 邏輯運算符

|       運算符       |             語法             |          描述          |
| :----------------: | :--------------------------: | :--------------------: |
|     `and`,`&&`     |     a and b 或者 a && b      | 邏輯與，兩個為真才為真 |
| `or`, &#124;&#124; | a or b 或者 a &#124;&#124; b | 邏輯或，一個為真才為真 |
|     `not`,`!`      |       `not` a 或者 !a        | 邏輯非，真為假，假為真 |

注意：盡量使用英文表達式

```sql
-- 條件查詢,查詢成績95——100的學生
select student_no from student where student_result>=95 and student_result<=100;

-- 區間查詢(查詢95——100分的同學)
select student_no from student where student_result between 95 and 100;

--查詢學號不為1000的同學的成績
select student_no from result where not student_no=1000;
```

### 模糊查詢


